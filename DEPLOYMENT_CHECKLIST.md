# 部署验证清单

## 部署前检查

### ✅ 代码准备
- [ ] 所有代码已提交到GitHub
- [ ] `.gitignore` 文件已配置
- [ ] `deno.json` 配置文件存在
- [ ] `main.ts` 包含完整的V4签名实现

### ✅ 本地测试
- [ ] Node.js版本本地运行正常
- [ ] 火山引擎API本地测试通过
- [ ] 其他模型API正常工作

## Deno Deploy部署

### ✅ 项目配置
- [ ] 在Deno Deploy创建新项目
- [ ] 连接到GitHub仓库
- [ ] 设置入口文件为 `main.ts`
- [ ] 配置自动部署

### ✅ 环境变量设置
在Deno Deploy项目设置中添加:
- [ ] `OPENROUTER_API_KEY` (可选)
- [ ] `MODELSCOPE_API_KEY` (可选)
- [ ] `VOLCENGINE_API_KEY` (格式: AccessKeyId:SecretAccessKey)

## 部署后验证

### ✅ 基础功能测试
- [ ] 访问部署URL，页面正常加载
- [ ] 主题切换功能正常
- [ ] 模型选择器显示所有选项

### ✅ API状态检查
测试以下端点:
- [ ] `/api/key-status` - OpenRouter密钥状态
- [ ] `/api/modelscope-key-status` - ModelScope密钥状态
- [ ] `/api/volcengine-key-status` - 火山引擎密钥状态

### ✅ 火山引擎API测试

#### 测试步骤:
1. [ ] 在界面中选择"即梦生图"模型
2. [ ] 输入API密钥 (格式: AccessKeyId:SecretAccessKey)
3. [ ] 输入测试提示词: "一只可爱的小猫"
4. [ ] 选择分辨率: 1024x1024
5. [ ] 点击生成按钮

#### 预期结果:
- [ ] 请求成功提交
- [ ] 显示"生成中..."状态
- [ ] 最终返回图片URL或错误信息

### ✅ 错误处理测试
- [ ] 无效API密钥格式测试
- [ ] 空提示词测试
- [ ] 超大分辨率测试
- [ ] 网络超时测试

## 常见部署问题

### 问题1: 部署失败
**检查项:**
- [ ] GitHub仓库是否公开
- [ ] `main.ts` 文件是否存在
- [ ] 代码语法是否正确

### 问题2: 环境变量未生效
**检查项:**
- [ ] 环境变量名称是否正确
- [ ] 值是否包含多余空格
- [ ] 是否需要重新部署

### 问题3: API调用失败
**检查项:**
- [ ] API密钥格式是否正确
- [ ] 网络连接是否正常
- [ ] 查看Function Logs获取详细错误

## 性能验证

### ✅ 响应时间
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间合理
- [ ] 图片生成时间在预期范围内

### ✅ 并发测试
- [ ] 多个用户同时使用
- [ ] 多个API同时调用
- [ ] 系统稳定性良好

## 监控设置

### ✅ 日志监控
- [ ] 在Deno Deploy查看Function Logs
- [ ] 设置错误告警(可选)
- [ ] 监控API调用频率

### ✅ 使用统计
- [ ] 记录用户访问量
- [ ] 统计API调用次数
- [ ] 监控成功率

## 维护计划

### ✅ 定期检查
- [ ] 每周检查服务状态
- [ ] 每月检查API密钥有效性
- [ ] 定期更新依赖版本

### ✅ 备份策略
- [ ] 代码备份到GitHub
- [ ] 配置文件备份
- [ ] 环境变量记录

## 用户支持

### ✅ 文档完善
- [ ] README.md 更新完整
- [ ] 故障排除指南可用
- [ ] 部署指南清晰

### ✅ 反馈渠道
- [ ] 设置问题反馈方式
- [ ] 准备常见问题解答
- [ ] 建立用户支持流程

---

## 验证完成确认

当所有检查项都完成后，您的Nano Banana项目就成功部署并可以正常使用了！

如果遇到任何问题，请参考 [故障排除指南](./TROUBLESHOOTING.md)。